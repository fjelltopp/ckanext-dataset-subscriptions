{% set num_of_datasets = activities|length %}
{% set loop_max = nr_of_datasets_to_display -1 -%}
{{ _(header) }}
{% for activity in activities[0:nr_of_datasets_to_display] -%}
{% if activity.dataset_groups is defined -%}
    {% set group_name = activity.dataset_groups[0].title + ' | ' -%}
{% else -%}
    {% set group_name = "" -%}
{% endif -%}
{% if activity.dataset_extras is defined -%}
    {% set program_area = activity.dataset_extras[0].value + ' | ' -%}
{% else -%}
    {% set program_area = "" -%}
{% endif -%}
    {{ _("* {count}. {group_name}{program_area}{title} *").format(count=loop.index, title=activity.data.package.title,
    group_name=group_name, program_area=program_area) }}
{% set datasets_left = num_of_datasets - loop.index -%}
{% if loop.index == nr_of_datasets_to_display and num_of_datasets > nr_of_datasets_to_display %}
{{ _("And {datasets} more...").format(datasets=datasets_left) }}
{% endif -%}
{% endfor -%}

{{ _("Visit {site_url}/dashboard to see to see more details in DMS.").format(site_url=g.site_url) }}
{{ _("You can change your notification settings here:") }}
{{ g.site_url + '/user/edit' }}